
# Завдання 1

## Умова

Скільки пам’яті може виділити malloc(3) за один виклик?
Параметр malloc(3) є цілим числом типу даних size_t, тому логічно максимальне число, яке можна передати як параметр malloc(3), — це максимальне значення size_t на платформі (sizeof(size_t)). У 64-бітній Linux size_t становить 8 байтів, тобто 8 * 8 = 64 біти. Відповідно, максимальний обсяг пам’яті, який може бути виділений за один виклик malloc(3), дорівнює 2^64. Спробуйте запустити код на x86_64 та x86. Чому теоретично максимальний обсяг складає 8 ексабайт, а не 16?

## Пояснення

Теоретично максимальний обсяг пам’яті, який можна передати malloc(3), визначається максимально можливим значенням типу size_t.

Для 64-бітної системи (x86_64) size_t має розмір 8 байтів (64 біти), тобто максимальне значення size_t — це 2^64 -1. Однак у реальних умовах система не виділить 16 ексабайт (максимум для 64-бітного числа), через обмеження фізичної пам’яті, віртуальної пам’яті, а також через особливості самого malloc(3).

Чому не 16 ексабайт, а 8?
Архітектура x86_64 використовує канонічні адреси. Поточні 64-бітні процесори не використовують всі 64 біти для адресації. У більшості сучасних CPU використовується 48 або 57 біт для адрес, а решта бітів повинні бути або всі 0, або всі 1. Якщо використовується 48-бітна адресація, доступна область пам’яті — 256 ТБ (2⁴⁸ байт), а не повні 16 ЕБ. Якщо використовується 57-бітна адресація, то це 128 ПБ (2⁵⁷ байт).

Операційна система (наприклад, FreeBSD або Linux) додатково обмежує доступний простір для malloc(3), враховуючи віртуальний адресний простір процеса, налаштування ліміту ulimit -v та фізичну пам’ять і swap.

На 32-бітній системі (x86) size_t має розмір 4 байти (32 біти), отже, максимально можливе значення: 2^32 - 1 = 4,294,967,295(близько 4ГБ). Проте на багатьох 32-бітних ОС (FreeBSD, Linux) користувацькому процесу зазвичай доступно тільки 3 ГБ, оскільки 1 ГБ зарезервований для ядра.

### Висновок
Теоретичний максимум malloc(3) визначається size_t. Реальний максимум залежить від архітектури CPU, підтримки ОС та обмежень віртуальної пам’яті. У x86_64 адресація часто обмежена 48 або 57 бітами, тому доступно не 16 ЕБ, а максимум 8 ЕБ або менше.
